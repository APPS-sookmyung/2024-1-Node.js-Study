# [5주차]섹션 3. 1-4

node로 서버 열기 

노드는 자바스크립트를 실행하는 것이기 때문에 서버는 아니지만 서버를 실행하도록 할 수는 있다. 

서버와 클라이언트: 클라이언트가 서버가 열리도록 요청을 하고 서버는 응답하여 클라이언트에 서버를 보여준다.

http: 서버에 요청할 수 있는 명령어 형태

8080포트에서 서버 연결해서 (localhost:8080에서의 포트번호 8080은 생략할 수 없다. )

개인 컴퓨터는 localhost를 기본적으로 제공하므로 포트 번호를 입력하면 결과가 나온다. (local이기 때문에 내 컴퓨터 내에서만 실행된다. ) 

https는 443포트를 숨기고 있다. 

http는 80포트를 숨기고 있다. 

포트번호가 있기 때문에 같은 도메인을 활용하더라도 다른 포트에 연결하면 다른 페이지를 보여줄 수 있다. 

서버코드를 수정한 다음에 꼭 껐다 켜야 결과가 반영된다. 

브라우저에 따라서 html과 문자열을 구분하지 못하는 경우가 있다. 

REST API 

/index.html → index.html을 보내 달라는 뜻이다. 보내줄지 안 줄지는 서버가 결정하는 일이다. 

REST API는 서버의 주소를 정하는 규칙이다. 구조화를 해두면 사용자가 주소를 추측할 수 있어 좋다. 하지만 해커들도 추측하기 쉽기 때문에 주의해야 한다. 

예시: /user는 사용자에 대한 정보를 요청, /post는 게시글에 대한 자원을 요청한다. 

http 요청 메서드

동사메서드를 지원한다. 클라이언트가 누구든 서버와 http 프로토콜로 소통 가능하다. 

GET: 서버 자원을 가져오려고 할 때 (새로고침하면 GET/자원을 가져온다.)

POST: 서버에 자원을 새로 등록하려고 할 때, 또는 애매한 상황에 
PUT: 전체 수정
PATCH: 부분 수정
DELETE: 자원을 삭제

```jsx
http.createServer(async (req, res) => {
  try {
    if (req.method === 'GET') { //req는 요청에 관한 것이다. res는 응답에 관한 것
      if (req.url === '/') { //url이 /일 때 
```

req: 요청에 관한 것을 다룬다. 

res: 응답에 관한 것을 다룬다. 

현재 작성된 형태를 보면 GET요청이 보내지고 url이 ‘/’일 경우 실행되도록 되어있다. 새로고침을 하는 것도 GET/로 요청을 보내는 것이다. 

res.writeHead(200, { 'Content-Type': 'text/html; charset=utf-8' });

에서 200은 요청이 성공적으로 보내졌음을 나타낸다. 201은 요청이 성공적으로 생성됐음을 나타낸다.(상태코드의 자세한 예시는 http status code를 치면 자세히 나온다. ) writeHead는 headers를 작성하는 것이다. header는 데이터들에 대한 데이터, 즉 html이 html임을 알려주고 몇시에 접근했는지, 성공적이었음을 알려주는 데이터이다. (이러한 header는 크롬의 검사→ network → headers에서 볼 수 있다. )

```jsx
 try {
        const data = await fs.readFile(path.join(__dirname, req.url));
        return res.end(data);
      } catch (err) {
```

위의 코드를 통해서 css, html등이 포착된다.