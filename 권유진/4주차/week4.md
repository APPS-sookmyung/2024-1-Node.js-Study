# [4주차]섹션 2. 9-16

**노드 내장 모듈 알아보기**

암호화

암호화: 평문을 암호로 만듦

복호화: 암호를 평문으로 해독 

단방향 암호화(crypto)

암호화는 가능하지만 복호화는 불가능한 것이다. 그 중 대표적으로 해시 기법이 있다. 해시 기법은 문자열을 고정된 길이의 다른 문자열으로 바꾸는 방식으로 해시만을 보고 암호를 해독하기는 매우 어렵다. 

사용법

createHash(알고리즘) //알고리즘의 보안성이 나날히 변하고 있기 떄문에 취약해지면 강화된 알고리즘을 사용해야 한다.

update(문자열) //변환할 문자열을 넣으면 된다.

dsgest(인코딩)//결과물로 변환된 문자열을 반환한다. 

양방향 암호화

암호문의 복호화가 가능한 모듈, 암호화할 때 사용된 Key를 복호화 할 때 동일하게 적용하여 해독한다. 만약 프론트에 Key에 대한 정보를 담고 있다면 암호가 공개될 위험이 생긴다. 

메서드는 자료 참고

util

각종 편의 기능을 모아둔 모듈을 말한다. 

deprecated: 이전의 것을 수정해야 할 때 무조건적으로 수정할 경우 기존에 사용하던 프로그램에서 오류가 발생할 수 있으므로 수정할 코드를 deprecated로 감싸주어 수정되었음을 경고하는 역할을 한다. (오류에 대한 방지)

promisify: 콜백함수를 감싸면 promise가 된다. async/await 패턴을 사용할 수 있다. 사용 형식은 (err, data) ⇒ {}

worker_threads

노드에서 멀티스레드 방식을 사용할 수 있게 해준다. 

isMainThread를 통해 코드가 메인 스레드에서 실행되는지, 워커 스레드에서 실행되는지 구분할 수 있다. 

메인 스레드에서 워커 스레드로 일이 이동하여 분배한 다음에 나온 결과물을 다시 메인 스레드로 이동시켜 일의 분배 구조를 만든다. 워커 스레드를 이용할 때 일이 끝났는지 판단하는 것을 직접 설정해야 일이 끝나게 된다. 

예시: 워커 스레드에서 일이 끝난다면 워커 스레드를 delete하여 모든 워커 스레드가 사라질 경우 모든 일이 종료되는 것이다.

워커스레드를 사용하면 실행 시간이 줄어들기는 하지만 워커 스레드의 개수에 반비례하여 줄어들지는 않는다.  

child_process

노드에서 다른 프로그램을 실행하고 싶거나 명령어를 수행하고 싶을 때 사용한다. 현재 노드 프로세스 외에 새로운 것을 띄워서 수행한다. 

data.tostring: 문자열로 프로그램을 받아오기 위해서 사용한다.

spawn: py, C++로 멀티 스레드를 사용할 때 spawn을 이용하면 노드가 실행호출을 할 수 있게 된다. 

그 외의 기타 모듈들은 자료를 참고해 추가 학습

**파일 시스템 접근하기** 

fs(File System)

fs.readFile(``./readMe.txt``, (err, data) //노드는 에러를 앞에 두어야 한다.

이대로 파일을 읽을 경우 buffer형식으로 표현되어 읽을 수 없으므로 tostring을 적용해 주어야 한다. 

reauire(`fs`).promises //프로미스가 적용되어 .then과 .catch를 사용할 수 있다. 

두 경우 다 비동기 코드로 순서대로 진행되지 않는다. 

과제

CommonJS 모듈 시스템을 이용해서 코드 짜보기