# 1주차

## 노드의 정의 

~~많이들 노드를 서버라고 생각함…하지만 nono…노드가 서버 역활을 실행할 뿐~~

- 크롬 V8 자바스크립트 엔진으로 빌드된 자바스크립트 **런타임**이다. (런타임 = 실행기)
    - 자바스크립트는 원래 브라우저에서 실행되었음, html이 없으면 읽지를 못했음
    - node js 가 나오면서 자스는 종속성에서 벗어남.
    - 장점 : 다양한 역활에서 쓰일 수 있음. (웹, 앱, 게임…)
        
                  확장성을 높여줌
        
    - 소스 코드 작성 (자스) → 노드로 실행 → 동작
        
        (게임, 서버…)
        
- 노드 내부구조
    - c, c++ 로 작성 / V8 엔진 : 오픈 소스 자바스크립트 엔진 → 속도 문제 개선
    
    ![Untitled](1%E1%84%8C%E1%85%AE%E1%84%8E%E1%85%A1%20ca74d8b2a6364036bdd56cdae3f4a946/Untitled.png)
    
    - libuv : 노드의 특성인 이벤트 기반, 논블로킹 I/O 모델을 구현한 라이브러리 | 비동기모델 → 빠른 성능을 이끌어내기 쉽다.
- 이벤트 기반 (당연한거… 모든 프로그램들이 다 적용…)
    - 이벤트가 발생할 때 미리 지정해둔 작업을 수행하는 방식 ( 클릭, 네트워크 요청, 타이머…)
    - 주체가 사람일 필요 X ( 로봇을 쿡 질렀는데 ‘왜’)
    - 메모리에 여러 동작을 등록 → 클릭 → 페이지 닫기(콜백 함수)
        
        ![Untitled](1%E1%84%8C%E1%85%AE%E1%84%8E%E1%85%A1%20ca74d8b2a6364036bdd56cdae3f4a946/Untitled%201.png)
        

- 논블로킹 I/O (동시 아님)…
    - 노드는 동기이면서 논블로킹, 비동기면서 논블로킹→이 상황에서 많이들 동시에 프로그램이 돌아간다고 오해 but 노드에서 동시 구현 매우 어려움 일부를 빼고는 없음
    - 동기 → 코드가 순서대로 실행 | 비동기 → 코드가 순서대로 실행되지 않을 수도 있음
    
- 프로세스 vs 스레드
    - 싱글 스레드 : 스레드가 하나 (효율적 구조는 아님, 고객 3 점원 1)
        
        멀티 스레드 : 스레드가 여러 개 ( 고객 3, 점원 3 → 비용이 너무 많이 들어감)
        
    - 프로그램 하나 뜰 때마다 프로세스가 하나 뜬다 라고 생각하면 됨 (기본)
    - 크롬에서 여러개의 창을 띄우는 상황 → 창들을 스레드라고 생각 (비유… 실제로는 아님)
    - ~~노드를 싱글 스레드라고 많이들 생각하지만~~… 실제로는 멀티 스레드 but 직접 다룰 수 있는 스레드는 하나이기 때문에 싱글 스레드라고 표현함
    - 노드 14버전부터 멀티 스레드 활용 가능
    - 장점 : 한번에 여러가지를 띄워두고 있을 수 있기때문에 편리함 ( 인스타그램 쓰다가 페이스북 알람볼려면 끄고 가서 보고… 번거로움… 싱글스레드의 단점)
    - 멀티스레딩의 유일한 단점 = 코딩 어려움…
    - 노드 실행 → 스레드 4개 생성 → 1개만 사람이 실행 가능 → 3개는 프로그램을 동시에 돌리기 위해 대기 중
    
    ![Untitled](1%E1%84%8C%E1%85%AE%E1%84%8E%E1%85%A1%20ca74d8b2a6364036bdd56cdae3f4a946/Untitled%202.png)
    
    - 점원 관리가 point → 해결책 : 체임점 | 여러개의 주방을 만들어서 고객을 분산 (멀티 프로세싱)
    - 노드의 싱글 스레드를 어떻게 잘 다룰지가 point

## 노드의 역활

- 서버로서의 노드
    - 브라우저 → 네이버 접속, 브라우저 (클라이언트), 네이버 (서버)
    - 핸드폰 → 앱스토어 → 앱, 핸드폰 (클라이언트), 앱스토어 (서버)
    - 클라이언트 요청 → 서버 → 응답 → 클라이언트
    - 자스로 서버 만드는 코딩 → 노드가 실행 → 서버를 컴퓨터에 실행
    
    | 장점 | 단점  |
    | --- | --- |
    | 멀트 스레드 방식에 비해 컴퓨터 자원을 적게 사용함 | 싱글스레드라서 CPU 코어를 하나만 사용 |
    | I/O 작업( input/output)이 많은 서버로 적합 | CPU 작업이 많은 서버로는 부적합 (진상- 이미지, 암호화, 알고리즘) |
    | 멀트 스레드 방식보다 쉬움 | 하나뿐인 스레드가 멈추지 않도록 관리해야함 |
    | 웹 서버가 내장되어 있음 | 서버 규모가 커졌을 때 서버를 관리하기 어려움 |
    | 자스를 사용 (가장 큰 장점) | 어중간한 성능 (ml, 비트코인…) |
    | JSON 형식과 호환하기 쉬움 |  |
    - 노드는 없어지기 쉽지 않음 - 자스 써서… 근데 deno가 위협할 수는 있음…

- 서버 외의 노드
    - 자스 런타임이기 때문에 용도가 서버에만 한정 X