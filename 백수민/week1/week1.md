## < 섹션 0. 개정3판 강좌 FAQ & 강의수강Tip & 1강 >

### 1.1 노드(Node.js)의 정의:

- 노드(Node.js)는 크롬 V8 자바스크립트 엔진으로 빌드된 자바스크립트 런타임
  - 런타임: 특정 언어로 만든 프로그램을 실행할 수 있는 환경을 뜻함
  - 간단히 말해, 노드는 자바스크립트로 작성된 프로그램을 실행시켜주는 자바스크립트 실행기
    - 다양한 자바스크립트 애플리케이션을 실행할 수 있음:
      - ex) 모바일 앱, 데스크탑 프로그램, 게임 등등
      - 그 중 서버 애플리케이션을 실행하는 데 제일 많이 사용됨

- 노드 출시 이전에는 자바스크립트 런타임을 내장하고 있는 웹 브라우저 위에서만 자바스크립트를 실행할 수 있었음
  구글에서 V8 엔진을 사용해 크롬을 출시하면서 노드가 개발되었고 웹 브라우저 밖에서도 자바스크립트를 실행할 수 있게됨
  - 노드의 출시로 자바스크립트는 HTML, 브라우저의 종속성에서 벗어나고 자바스크립트의 위성과 역할이 확장됨

- 노드의 내부 구조:
  - 내부는 C/C++ 구현되어 있음
  - 내부적으로 V8과 libuv 포함하고 있음:
    - V8 엔진: 오픈 소스 자바스크립트 엔진 -> 속도 문제 개선
    - libuv: 노드의 특성인 이벤트 기반, 논 블로킹 I/O 모델을 구현한 라이브러리
   
---

### 1.2 노드(Node.js)의 특성:

- #### 이벤트 기반:
  - 이벤트가 발생할 때 미리 지정해둔 작업을 수행하는 방식
  - 이벤트의 예: 클릭, 네트워크 요청, 타이머 등
  - 콜백 함수: 이벤트가 발생했을 때 실행될 함수
  - 특정 이벤트에 작업을 지정해주는 방법: 이벤트 리스너(even listener)에 콜백(callback)함수를 등록

예시) 버튼을 클릭할 때 경고창을 띄운다:  
버튼 클릭(이벤트 발생) -> 경고창 팝업(이벤트 리스너에 등록된 콜백 함수 호출)

- #### 논 블로킹 I/O:
  - 동기/블로킹: 코드가 순서대로 실행된다 (이전 작업이 끝나야만 다음 작업 수행)
  - 비동기/논 블로킹: 코드가 순서대로 실행되지 않을 수도 있다 (이전 작업이 완료될 때까지 대기하지 않고 다음 작업 수행)
  - 기본적으로 자바스크립트로 작성된 코드는 동시에 실행될 수 없음. BUT, 자바스크립트 상에서 돌아가는 것이 아닌 일부 코드는 동시에 처리될 수 있음.
    - 일부 코드: I/O 작업(파일 시스템 접근, 네트워크 요청), 압축, 암호화 등
    - 나머지 코드는 블로킹 방식으로 실행됨
    - I/O 작업이 많을 때 노드 활용성이 극대화

- #### 프로세스 vs 스레드:
  - 프로세스: 운영체제에서 할당하는 작업의 단위, 프로세스 간 자원 공유 X
  - 스레드: 프로세스 내에서 실행되는 작업의 단위, 부모 프로세스 자원 공유 O
  - 노드 프로세스는 멀티 스레드이지만 직접 다룰 수 있는 스레드는 하나이기 때문에 싱글 스레드라고 표현
    - 싱글 스레드: 스레드가 하나뿐인 것을 의미
    - 멀티 스레드는 구현이 어렵다는 단점이 있기 때문에 노드는 싱글 스레드 방식을 채택함
  - 노드는 주로 멀티 스레드 대신 멀티 프로세스 활용
  - 14버전부터 멀티 스레드 사용 가능 (But, 멀티 스레드 활용 권장 목적 X)

    
노드 실행시 프로세스가 하나 생성됨  ->  프로세스에서 여러 개의 스레드가 생성됨  ->  그 중 제어할 수 있는 스레드는 하나뿐
  - 사용할 수 있는 스레드가 하나뿐이기 때문에 한 번에 하나의 요청만 처리할 수 있음
  - 나머지 스레드는 특정한 조건이 만족될 때까지 대기하고 있음  =>  비효율 발생
  
Hence, 논 블로킹 모델 채택:
  - 일부 코드(I/O)를 백그라운드(다른 프로세스)에서 실행 가능
    - 요청을 먼저 받고, 완료될 때 응답함
    - I/O관련 코드가 아닌 경우 싱글 스레드, 블로킹 모델과 같아짐
  
---

### 서버로서의 노드(Node.js):

- 서버: 네트워크 통해 클라이언트에 정보나 서비스를 제공하는 컴퓨터 또는 프로그램
- 클라이언트: 서버에 요청을 보내는 주체
  - 브라우저
  - 데스크탑 프로그램
  - 모바일 앱
  - 다른 서버에 요청을 보내는 서버
- 서버-클라이언트 예시:
  - 브라우저(클라이언트, 요청)가 길벗 웹사이트(서버, 응답)에 접속
  - 핸드폰(클라이언트)을 통해 앱스토어(서버)에서 앱 다운로드 
- 노드 != 서버 (BUT, 노드는 서버를 구성할 수 있게 하는 모듈 제공)
- 노드 서버의 장단점:

|장점|단점|
|---|---|
| 멀티 스레드 방식에 비해 컴퓨터 자원을 적게 사용함 | 싱글 스레드라서 CPU코어를 하나만 사용함 |
| I/O 작업이 많은 서버로 적합 | CPU 작업이 많은 서버로는 부적합 |
| 멀티 스레드 방식보다 쉬움 | 하나뿐인 스레드가 멈추치 않도록 관리해야 함 |
| 웹 서버가 내장되어 있음 | 서버 규모가 커졌을 때 서버를 관리하기 어려움 |
| 자바스크립트를 사용함 | 어중간한 성능 |
| JSON 형식과 호환하기 쉬움 | |

- CPU 작업을 위해 AWS Lambda나 Google Cloud Functions같은 별도 서비스 사용
- 페이팔, 넷플릭스, 나사, 월나트, 링크드인, 우버 등에서 메인 또는 서브 서버로 사용
- 자바스크립트 런타임이기 때문에 용도가 서버에만 한정되지 않음
- 웹 모바일 데스크탑 애플리케이션에서도 사용
- 아래 프레임웨크가 노드 기반으로 동작함:
  - 웹 프레임워크: Angular, React, Vue, Meteor 등
  - 모바일 앱 프레임워크: React Native
  - 데스크탑 개발 도구: Electron(Atom, Slack, VSCode, Discord 등 제작)



